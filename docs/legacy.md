# Legacy-версия подсистемы имитационного моделирования комплекса АТ-ТЕХНОЛОГИЯ

## Установка и запуск программного обеспечения

1. Предварительно необходимо установить среду разработки [Microsoft Visual Studio Community](https://visualstudio.microsoft.com/vs/community/).

2. Скачать или склонировать данный репозиторий в соответствующую директорию.
```bash
git clone https://github.com/leerycorsair/ATTec-Simulation-Subsystem.git
```

3. Перейти в каталог репозитория и переключиться на ветку ``legacy``.
```bash
git checkout legacy
```

4. Для конкретного компонента следует открыть ``.sln``-файл и выполнить запуск проекта.

## Структура программного комплекса

Разработаное программное обеспечения включает в себя 5 компонентов: 

1. Редактор визуальных объектов (Сергей Капочкин).
2. Транслятор (Иван Пиянин + Со Тиха Аунг).
3. Компонент поддержки расчета состояний имитационной модели (Со Тиха Аунг).
4. Визуализатор (Со Тиха Аунг).
5. Редактор кадров анимации и правил отображения (Со Тиха Аунг).

## Технология построения ИМ средствами подсистемы имитационного моделирования

![Схема](./artifacts/legacy_scheme.svg)


## Протокол исследования и тестирования подсистемы имитационного моделирования

### Редактор визуальных объектов

|Функция|Вход|Ожидаемый результат|Фактический результат|Вывод|
|-|-|-|-|-|
|Создание модели при помощи меню (Меню>Файл>Создать модель).|Задается имя модели, тип моделируемой системы, имя специалиста, дата начала и завершения.|При нажатии на клавишу "Установить" должно появляться контекстное уведомление об успешном/неуспешном создании. <br> При нажатии на клавишу "Выйти" контекстное окно должно закрываться без сохранения. <br> При нажатии на клавишу "Помощь" должно появляться контекстное уведомление с подсказами для пользователя.|При нажатии на указанные клавиши ничего не происходит.|Рассмотренный функционал не реализован.|
|Сохранение модели при помощи меню (Меню>Файл>Сохранить).|-|Имитационная модель на языке РДО<sup>АТ</sup> в виде XML-файла.|Имитационная модель на языке РДО<sup>АТ</sup> в виде XML-файла.|Рассмотренный функционал реализован. <br> Примечание: Отсутствует информация об имени и пути сохраняемого файла, а также возможность их выбора.|
|Загрузка существующей корректной модели  при помощи меню (Меню>Файл>Загрузить).|Задается имя XML-файла на языке РДО<sup>АТ</sup> c помощью проводника.|Появление всех загруженных элементов (типов ресурсов, ресурсов, образцов операций и т.д.) в графическом представлении на рабочем пространстве и в текстовом виде в соответствующих списках. |Появление всех загруженных элементов (типов ресурсов, ресурсов, образцов операций и т.д.) в графическом представлении на рабочем пространстве и в текстовом виде в соответствующих списках. |Функционал реализован.|
|Загрузка существующей некорректной модели при помощи меню (Меню>Файл>Загрузить).|Задается имя XML-файла на языке РДО<sup>АТ</sup> c помощью проводника.|Появление уведомления о некорректном содержимом файла.|Появление исключения и аварийное завершение программы.|Функционал нереализован. Необходимо добавить обработку соответствующего исключения.|
|Завершение работы  при помощи меню (Меню>Файл>Выйти).|-|Появление предупреждения о закрытии.|Появление предупреждения о закрытии.|Функционал реализован.<br>Примечание: отсутсвует предложение о сохранении текущего прогресса.|
|Добавление объекта "Тип ресурсов" при помощи меню (Меню>Вставить>Тип ресурсов).|Задается имя типа, вид ресурсов, а также параметры ресурса.|Появление на рабочем пространстве и в соответствующем списке.|Появление на рабочем пространстве и в соответствующем списке.|Функционал реализован.|
|Добавление некорректного объекта "Тип ресурсов" при помощи меню (Меню>Вставить>Тип ресурсов).|Задается некорректное имя типа, вид ресурсов, а также параметры ресурса.|Появление уведомления о некорректном вводе.|Появление уведомления о некорректном вводе.|Функционал реализован.|
|Добавление объекта "Ресурс" при помощи меню (Меню>Вставить>Ресурс).|Задается имя ресурса, тип ресурса, признак трассировки и описание параметров.|Появление на рабочем пространстве и в соответствующем списке.|Появление на рабочем пространстве и в соответствующем списке.|Функционал реализован.|
|Добавление некорректного объекта "Ресурс" при помощи меню (Меню>Вставить>Ресурс).|Задается некорректное имя ресурса, тип ресурса, признак трассировки и описание параметров.|Появление уведомления о некорректном вводе.|Появление уведомления о некорректном вводе.|Функционал реализован.|
|Добавление объекта "Ресурс" при помощи меню (Меню>Вставить>Ресурс) при несуществующих объектах "Тип ресурсов".|-|Появление соответствующего уведомления.|Появление соответствующего уведомления.|Функционал реализован.|
|Добавление объекта "Функция" при помощи меню (Меню>Вставить>Функция).|Задается имя фунции, тип возвращаемого значения, тело функции и ее параметры.|Появление на рабочем пространстве и в соответствующем списке.|Появление на рабочем пространстве и в соответствующем списке.|Функционал реализован.|
|Добавление некорректного объекта "Функция" при помощи меню (Меню>Вставить>Функция).|Задается некорректное имя фунции, тип возвращаемого значения, тело функции и ее параметры.|Появление уведомления о некорректном вводе.|Появление уведомления о некорректном вводе.|Функционал реализован.|
|Добавление объекта "Образец операции" при помощи меню (Меню>Вставить>Образец операции).|Задается имя образца, тип образца, параметры времени и тело образца.|Появление на рабочем пространстве и в соответствующем списке.|Появление на рабочем пространстве и в соответствующем списке.|Функционал реализован.|
|Добавление некорректного объекта "Образец операции" при помощи меню (Меню>Вставить>Образец операции).|Задается некорретное имя образца, тип образца, параметры времени и тело образца.|Появление соответствующего уведомления.|Появление соответствующего уведомления.|Функционал реализован.|
|Добавление объекта "Образец операции" при помощи меню (Меню>Вставить>Операция) при несуществующих объектах "Тип ресурсов".|-|Появление соответствующего уведомления.|Появление соответствующего уведомления.|Функционал реализован.|
|Добавление объекта "Операция" при помощи меню (Меню>Вставить>Операция).|Задается имя операции, образец операции и тело операции.|Появление на рабочем пространстве и в соответствующем списке.|Появление на рабочем пространстве и в соответствующем списке.|Функционал реализован.|
|Добавление некорректного объекта "Операция" при помощи меню (Меню>Вставить>Операция).|Задается некорретное имя операции, образец операции и тело операции.|Появление соответствующего уведомления.|Появление соответствующего уведомления.|Функционал реализован.|
|Добавление объекта "Образец операции" при помощи меню (Меню>Вставить>Операция) при несуществующих объектах "Образец операции".|-|Появление соответствующего уведомления.|Появление соответствующего уведомления.|Функционал реализован.|
|Получение справочной информации о программе при помощи меню (Меню>Справка>О программе).|-|Общая информация о программе в виде контестного уведомления.|Общая информация о программе в виде контестного уведомления.|Функционал реализован.|
|Получение справочной информации о РДО при помощи меню (Меню>Справка>Справка о РДО).|-|Общая информация о РДО в виде контестного уведомления.|Общая информация о РДО в виде контестного уведомления.|Функционал реализован.|
|Перемещение объектов на рабочем пространстве.|-|Движение выбранного объекта при помощи зажатой клавиши мыши.|Движение выбранного объекта при помощи зажатой клавиши мыши.|Функционал реализован.|
|Подробный просмотр свойств объекта "Тип ресурсов".|-|Получение соответствующего контекстного окна.|Получение соответствующего контекстного окна.|Функционал реализован.|
|Подробный просмотр свойств объекта "Ресурс".|-|Получение соответствующего контекстного окна.|Получение соответствующего контекстного окна.|Функционал реализован.|
|Подробный просмотр свойств объекта "Функция".|-|Получение соответствующего контекстного окна.|Получение соответствующего контекстного окна.|Функционал реализован.|
|Подробный просмотр свойств объекта "Образец операции".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Подробный просмотр свойств объекта "Операция".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Подробный просмотр свойств объекта "Релевантный ресурс".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Редактирование свойств объекта "Тип ресурсов".|-|Получение соответствующего контекстного окна.|Получение соответствующего контекстного окна.|Функционал реализован.|
|Редактирование свойств объекта "Ресурс".|-|Получение соответствующего контекстного окна.|Получение соответствующего контекстного окна.|Функционал реализован.|
|Редактирование свойств объекта "Функция".|-|Получение соответствующего контекстного окна.|Получение соответствующего контекстного окна без возможности редактирования.|Функционал не реализован.|
|Редактирование свойств объекта "Образец операции".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Редактирование свойств объекта "Операция".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Редактирование свойств объекта "Релевантный ресурс".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Удаление объекта "Тип ресурсов".|-|Получение соответствующего контекстного окна и удаление связанных объектов "Ресурс".|Получение соответствующего контекстного окна и удаление связанных объектов "Ресурс".|Функционал реализован.|
|Удаление объекта "Ресурс".|-|Получение соответствующего контекстного окна.|Получение соответствующего контекстного окна.|Функционал реализован.|
|Удаление объекта "Функция".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Удаление объекта "Образец операции".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Удаление объекта "Операция".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|
|Удаление объекта "Релевантный ресурс".|-|Получение соответствующего контекстного окна.|-|Функционал не реализован.|

### Транслятор
|Функция|Вход|Ожидаемый результат|Фактический результат|Вывод|
|-|-|-|-|-|
|Загрузка существующей имитационной модели на языке РДО<sup>АТ</sup> в виде XML-файла.|Задается имя XML-файла на языке РДО<sup>АТ</sup> c помощью проводника.|Сообщение о успешном прохождении лексического, синтаксического и семантического анализа.|Сообщение о успешном прохождении лексического, синтаксического и семантического анализа.|Функционал реализован.|
|Загрузка существующей имитационной модели на языке РДО<sup>АТ</sup> в виде XML-файла с ошибкой в лексике.|Задается имя XML-файла на языке РДО<sup>АТ</sup> c помощью проводника.|Появление соответствующего уведомления с ошибкой.|Появление соответствующего уведомления с ошибкой.|Функционал реализован.|
|Загрузка существующей имитационной модели на языке РДО<sup>АТ</sup> в виде XML-файла с ошибкой в синтаксисе.|Задается имя XML-файла на языке РДО<sup>АТ</sup> c помощью проводника.|Появление соответствующего уведомления с ошибкой.|Появление соответствующего уведомления с ошибкой.|Функционал реализован.|
|Загрузка существующей имитационной модели на языке РДО<sup>АТ</sup> в виде XML-файла с ошибкой в семантике.|Задается имя XML-файла на языке РДО<sup>АТ</sup> c помощью проводника.|Появление соответствующего уведомления с ошибкой.|Появление соответствующего уведомления с ошибкой.|Функционал реализован.|
|Создание COM-объекта для Run/Design Time.|Задание имени модели.|Создание соответствующего .dll-файла, C#-файла и появление соответствующего уведомления.|Ошибка доступа на запись файла и ошибка совместимости компилятора.|Функционал необходимо доработать на предмет совместимости. <br> Примечание: отсутсвует возможность гибкого выбора имени всех файлов и путей сохранения.|  

### Компонент поддержки расчета состояний имитационной модели
|Функция|Вход|Ожидаемый результат|Фактический результат|Вывод|
|-|-|-|-|-|
|Загрузка модели.|Задается имя файла модели c помощью проводника.|Появление соответствующего уведомления об успешной загрузке.|Появление соответствующего уведомления об успешной загрузке.|Функционал реализован.|
|Загрузка некорректной модели.|Задается имя файла модели c помощью проводника.|Появление соответствующего уведомления с ошибкой.| Появление исключения и аварийное завершение программы.|Функционал нереализован. Необходимо добавить обработку соответствующего исключения.|
|Запуск расчета имитационного моделирования.|Задается длина такта и их количество.|Постепенное увеличение счетчика тактов. Результат имитационного моделирования в виде XML-файла.|Постепенное увеличение счетчика тактов. Результат имитационного моделирования в виде XML-файла.|Функционал реализован. <br> Примечание: отсутсвует возможность выбора имени выходного файла и пути сохранения.|
|Запуск расчета имитационного моделирования без загрузки модели.|Задается длина такта и их количество.|Появление соответствующего уведомления с ошибкой.|Появление исключения и аварийное завершение программы.|Функционал нереализован. Необходимо добавить обработку соответствующего исключения.|
|Пауза расчета имитационного моделирования.|-|Приостановка счетчика текущих тактов.|Приостановка счетчика текущих тактов.|Функционал реализован.|
|Остановка расчета имитационного моделирования.|-|Сброс модели и всех параметров.|Сброс модели и всех параметров.|Функционал реализован.| 

### Редактор кадров анимации и правил отображения

To-Do

### Визуализатор

To-Do

## Протокол исследования и тестирования подсистемы имитационного моделирования (дополнительно)

### Редактор визуальных объектов

|Функция|Вход|Ожидаемый результат|Фактический результат|Вывод|
|-|-|-|-|-|
|Загрузка готовой модели|Задается имя XML-файла на языке РДО<sup>АТ</sup> c помощью проводника.|Появление всех загруженных элементов в графическом представлении на рабочем пространстве и в текстовом виде в соответствующих списках.|Не все загруженные элементы появляются в графическом представлении.<br>Параметры ресурсов загружаются некорректно.<br>Отсутсвует предварительная очистка рабочего пространства.|Функционал требует доработки.|
|Создание объекта "Тип ресурсов" с параметром ENUM|Задается имя типа, вид ресурсов, а также параметры ресурса.|Появление на рабочем пространстве и в соответствующем списке.|Нет возможности задать набор значений и соответствующей проверки корректности.|Функционал требует доработки.|
|Создание объекта "Ресурс"|Задается имя ресурса, тип ресурса, признак трассировки и описание параметров.|Появление на рабочем пространстве и в соответствующем списке.|Появление на рабочем пространстве и в соответствующем списке.-|Функционал требует доработки. Примечание: отсутствуют подсказки имен параметров. <br> Примечание: Параметры с заданными значениями по умолчанию можно не инициализировать.|
|Создание объекта "Ресурс" с числом параметров, больше ожидаемого|Задается имя ресурса, тип ресурса, признак трассировки и описание параметров.|Появление уведомления о некорректном вводе.|Появление исключения и аварийное завершение программы.|Функционал не реализован.|
|Сохранение имитационной модели|-|Имитационная модель на языке РДО<sup>АТ</sup> в виде XML-файла.|Имитационная модель на языке РДО<sup>АТ</sup> в виде XML-файла.|Функционал требует доработки. Параметры ресурсов сохраняются в некорректном формате.|

### Транслятор

|Функция|Вход|Ожидаемый результат|Фактический результат|Вывод|
|-|-|-|-|-|
|Загрузка существующей имитационной модели на языке РДО<sup>АТ</sup> в виде XML-файла с ошибкой.|Задается имя XML-файла на языке РДО<sup>АТ</sup> c помощью проводника.|Появление соответствующего уведомления с ошибкой.|Появление соответствующего уведомления с ошибкой.|Функционал реализован.<br>Примечание: отсутствует подробная информация об ошибке.|
|Создание COM-объекта для Run/Design Time с ошибкой.|Задание имени модели.|Уведомление уведомления с полной информацией об ошибке.|Множество непонятных уведомлений.|Функционал необходимо доработать.|  


## Примеры имитационных моделей

### Пример 1. Финансовый рынок

Моделирование финансового рынка играет ключевую роль в понимании, анализе и прогнозировании динамики рыночных условий, что обусловлено множеством причин. Далее приведены основные из них:

- **понимание рисков** помогает финансовым учреждениям и инвесторам принимать более обоснованные решения и эффективно управлять своими портфелями;
- **прогнозирование рыночных тенденций** является важным инструментом для принятия стратегических инвестиционных решений;
- **тестирование стратегий** позволяет управлять портфелем более эффективно, оценивая воздействие различных активов на общую структуру портфеля и распределяя ресурсы с учетом целей инвестора и рыночных условий;
- **оптимальное использование ресурсов** определяется имитационным моделированием и позволяет минимизировать издержки;
- **подготовка к неопределенности** - в условиях неопределенности моделирование предоставляет инструмент для анализа влияния различных сценариев и событий на финансовые рынки, что позволяет лучше подготовиться к переменам.


Первым шагом является построение имитационной модели на языке РДО<sup>АТ</sup> в компоненте "Редактор визуальных объектов". Определим объекты "Тип ресурсов", описывающие существующие классы в имитационной модели.

|Категория объектов|Название|Вид ресурса|Параметры|
|-|-|-|-|
|Тип ресурсов|Валюта|Постоянные|Текущий_курс - double (default = 0)<br> Дельта_курса - double (default = 0)<br>Максимум_за_24_часа - double (default = 0)<br>Минимум_за_24_часа - double (default = -1)<br>Максимум_за_30_дней - double (default = 0)<br>Минимум_за_30_дней - double (default = -1)<br>Международная - bool (default = false)|
|Тип ресурсов|Акция|Постоянные|Текущая_стоимость - double (default = 0)<br> Дельта_стоимости - double (default = 0)<br>Максимум_за_24_часа - double (default = 0)<br>Минимум_за_24_часа - double (default = -1)<br>Максимум_за_30_дней - double (default = 0)<br>Минимум_за_30_дней - double (default = -1)<br> В_обращении - int (default = 0)<br>Дельта_обращения - int (default = 0)|
|Тип ресурсов|Криптовалюта|Постоянные|Текущий курс - double (default = 0)<br> Дельта_курса - double (default = 0)<br>Максимум_за_24_часа - double (default = 0)<br>Минимум_за_24_часа - double (default = -1)<br>Максимум_за_30_дней - double (default = 0)<br>Минимум_за_30_дней - double (default = -1)<br>Категория - enum{Традиционная, Смарт_контракт, NFT, Стейбл_коин} (default = Традиционная)<br> Алгоритм - enum{PoW, PoS, DAG, DPoS, PoC} (default = PoW)|
|Тип ресурсов|Субъект_рынка|Постоянные|Резервы_валюта - int (default = 0)<br>Резервы_акции - int (default = 0)<br>Резервы_криптовалюта - int (default = 0)<br>Категория - enum{Частное_лицо, Банк} (default = Частное_лицо)|
|Тип ресурсов|Календарь|Постоянные|Часы - int (default = 0)<br>День - int (default = 0)<br>Месяц - int (default = 0)<br>Изменение_время - bool (default = false)|


Далее опишем экземпляры классов при помощи объектов "Ресурсы"

|Тип ресурсов| Название | Список параметров|
|-|-|-|
|Валюта|Рубль|0.011, 1.010, 0, -1, 0, -1, false|
|Валюта|Евро|1.09, 0.990, 0, -1, 0, -1, true| 
|Валюта|Юань|0.14, 1.005, 0, -1, 0, -1, true| 
|Валюта|Лари|0.37, 1.001, 0, -1, 0, -1, false| 
|Валюта|Тенге|0.0022, 0.970, 0, -1, 0, -1, false|
|Акция|Аэрофлот|0.44, 1.007, 0, -1, 0, -1, 433232, 10| 
|Акция|Газпром|1.65, 0.998, 0, -1, 0, -1, 3213123, 13| 
|Акция|Норникель|145, 1.031, 0, -1, 0, -1, 21234, -5| 
|Криптовалюта|BTC|37245.12, 1.008, 0, -1, 0, -1, Традиционная, PoW| 
|Криптовалюта|ETH|2045.20, 1.001, 0, -1, 0, -1, Смарт_контракт, PoS| 
|Криптовалюта|USDT|1, 1, 0, -1, 0, -1, Стейбл_коин, PoS| 
|Криптовалюта|XHC|25.83, 0.999, 0, -1, 0, -1, Смарт_контракт, PoC| 
|Субъект_рынка|Гражданин_В|12421, 312, 21, Частное_лицо|
|Субъект_рынка|Гражданин_А|523, 21212, 2, Частное_лицо|
|Субъект_рынка|Гражданин_К|421, 37, 38745, Частное_лицо|
|Субъект_рынка|Банк_России|523723, 312312, 813144, Банк|
|Календарь|Год_2023|0, 0, 0, false|

Далее определим объекты "Образцы операций".

|Тип образца|Название|Описание|
|-|-|-|
|Правило|||
|Операция|Обновление_курса_валюты|В каждый момент времени домножить текущий_курс на дельту_курса и изменить дельту_курса|
|Операция|Обновление_стоимости_акции|В каждый момент времени домножить текущию_стоимость на дельту_стоимости и изменить дельту_стоимости|
|Операция|Обновление_курса_криптовалюты|В каждый момент времени домножить текущий_курс на дельту_курса и изменить дельту_курса|
|Операция|Обновление_календаря|В каждый момент времени увеличить на час с соответсвующим переносом дней и месяцев|
|Правило|Обновление_минимума_валюты_за_сутки|Если предыдущий минимум больше текущего курса, то обновить минимум|
|Правило|Обновление_минимума_акции_за_сутки|Если предыдущий минимум больше текущей стоимости, то обновить минимум|
|Правило|Обновление_минимума_криптовалюты_за_сутки|Если предыдущий минимум меньше текущего курса, то обновить минимум|
Правило|Обновление_максимума_валюты_за_сутки|Если предыдущий максимум меньше текущего курса, то обновить максимум|
|Правило|Обновление_максимума_акции_за_сутки|Если предыдущий максимум меньше текущей стоимости, то обновить максимум|
|Правило|Обновление_максимума_криптовалюты_за_сутки|Если предыдущий максимум меньше текущего курса, то обновить максимум|
|Правило|Обновление_минимума_валюты_за_месяц|Если предыдущий минимум больше текущего курса, то обновить минимум|
|Правило|Обновление_минимума_акции_за_месяц|Если предыдущий минимум больше текущей стоимости, то обновить минимум|
|Правило|Обновление_минимума_криптовалюты_за_месяц|Если предыдущий минимум меньше текущего курса, то обновить минимум|
Правило|Обновление_максимума_валюты_за_месяц|Если предыдущий максимум меньше текущего курса, то обновить максимум|
|Правило|Обновление_максимума_акции_за_месяц|Если предыдущий максимум меньше текущей стоимости, то обновить максимум|
|Правило|Обновление_максимума_криптовалюты_за_месяц|Если предыдущий максимум меньше текущего курса, то обновить максимум|
|Правило|Обновление_минимума_валюты_новые_сутки|Если наступили новые сутки, то сбросить минимум|
|Правило|Обновление_минимума_акции_новые_сутки|Если наступили новые сутки, то сбросить минимум|
|Правило|Обновление_минимума_криптовалюты_новые_сутки|Если наступили новые сутки, то сбросить минимум|
|Правило|Обновление_максимума_валюты_новые_сутки|Если наступили новые сутки, то сбросить максимум|
|Правило|Обновление_максимума_акции_новые_сутки|Если наступили новые сутки, то сбросить максимум|
|Правило|Обновление_максимума_криптовалюты_новые_сутки|Если наступили новые сутки, то сбросить максимум|
|Правило|Обновление_минимума_валюты_новый_месяц|Если наступил новый месяц, то сбросить минимум|
|Правило|Обновление_минимума_акции_новый_месяц|Если наступил новый месяц, то сбросить минимум|
|Правило|Обновление_минимума_криптовалюты_новый_месяц|Если наступил новый месяц, то сбросить минимум|
|Правило|Обновление_максимума_валюты_новый_месяц|Если наступил новый месяц, то сбросить максимум|
|Правило|Обновление_максимума_акции_новый_месяц|Если наступил новый месяц, то сбросить максимум|
|Правило|Обновление_максимума_криптовалюты_новый_месяц|Если наступил новый месяц, то сбросить максимум|
|Нерегулярное событие|Повышение_ключевой_ставки|Уменьшить дельты_валюты, дельты_акций, увеличить дельты_криптовалюты <br> Смещение резервов субъектов в криптовалюты|
|Нерегулярное событие|Понижение_ключевой_ставки|Увеличить дельты_валюты, дельты_акций, уменьшить дельты_криптовалюты <br> Смещение резервов субъектов в валюты и акции|
|Нерегулярное событие|Финансовый кризис|Уменьшить дельты_валюты, дельты_акций, увеличить дельты_криптовалюты <br> Смещение резервов субъектов в акции и криптовалюты|
|Нерегулярное событие|Финансовое благополучие|Увеличить дельты_валюты, дельты_акций, дельты_криптовалюты|
|Нерегулярное событие|Нарастание напряженности|Уменьшить дельту двух валют|
|Нерегулярное событие|Укрепление сотрудничества|Увеличить дельту двух валют|

Финальным этапом является определение объектов "Операция" для всех соответствующих ресурсов.